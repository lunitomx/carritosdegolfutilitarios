---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import WhatsAppButton from '../../components/WhatsAppButton.astro';
import ProductCard from '../../components/ProductCard.astro';
import { siteConfig } from '../../config/site';

export async function getStaticPaths() {
  return [
    {
      params: { slug: 'hauler-pro-aluminium-bed-box-negro' },
      props: {
        product: {
          name: 'HAULER PRO ALUMINIUM BED BOX ELÉCTRICO',
          subtitle: 'BATEA ELÉCTRICA DE ALUMINIO - COLOR NEGRO',
          price: 220000,
          currency: 'MXN',
          description: 'Carrito utilitario eléctrico Cushman Hauler PRO modelo 2020 en color negro, equipado con batea eléctrica de aluminio, 9 baterías Trojan nuevas de 8V, llantas nuevas 20x8x10, pintura nueva, vestiduras nuevas en negro, luces LED, cargador integrado y defensa. Ideal para hotelería, industria y servicios.',
          images: [
            '/productos/DSC00899.webp',
            '/productos/DSC00900.webp',
            '/productos/DSC00902.webp',
            '/productos/DSC00903.webp',
            '/productos/DSC00905.webp',
            '/productos/DSC00907.webp',
            '/productos/DSC00908.webp',
            '/productos/DSC00910.webp',
            '/productos/DSC00912.webp',
            '/productos/DSC00914.webp',
            '/productos/DSC00915.webp',
            '/productos/DSC00916.webp',
            '/productos/DSC00920.webp'
          ],
          features: [
            '9 Baterías TROJAN Nuevas (8V)',
            'Batea Eléctrica de Aluminio',
            'Llantas Nuevas 20x8x10',
            'Pintura Nueva - Color Negro',
            'Vestiduras Nuevas en Negro',
            'Luces LED',
            'Cargador Integrado',
            'Defensa',
            '100% Eléctrico',
            'Modelo 2020'
          ],
          specs: [
            { label: 'Marca', value: 'Cushman' },
            { label: 'Modelo', value: 'Hauler PRO Aluminium Bed BOX' },
            { label: 'Año', value: '2020' },
            { label: 'Color', value: 'Negro' },
            { label: 'Motor', value: 'Eléctrico' },
            { label: 'Baterías', value: '9x Trojan 8V (Nuevas)' },
            { label: 'Tipo de Batea', value: 'Aluminio Eléctrica' },
            { label: 'Llantas', value: 'Nuevas 20x8x10' },
            { label: 'Vestiduras', value: 'Nuevas - Negro' },
            { label: 'Iluminación', value: 'Luces LED' },
            { label: 'Condición', value: 'Seminuevo - Excelente Estado' }
          ]
        }
      }
    },
    {
      params: { slug: 'hauler-pro-aluminium-bed-box-blanco' },
      props: {
        product: {
          name: 'HAULER PRO ALUMINIUM BED BOX ELÉCTRICO',
          subtitle: 'BATEA ELÉCTRICA DE ALUMINIO - COLOR BLANCO',
          price: 220000,
          currency: 'MXN',
          description: 'Carrito utilitario eléctrico Cushman Hauler PRO modelo 2020 en color blanco, equipado con batea eléctrica de aluminio, 9 baterías Trojan nuevas de 8V, llantas nuevas 20x8x10, pintura nueva, vestiduras nuevas en negro, luces LED, cargador integrado y defensa. Ideal para hotelería, industria y servicios.',
          images: [
            '/productos/DSC00942.webp',
            '/productos/DSC00943.webp',
            '/productos/DSC00945.webp',
            '/productos/DSC00946.webp',
            '/productos/DSC00947.webp',
            '/productos/DSC00949.webp',
            '/productos/DSC00951.webp',
            '/productos/DSC00952.webp',
            '/productos/DSC00953.webp',
            '/productos/DSC00954.webp',
            '/productos/DSC00955.webp',
            '/productos/DSC00956.webp',
            '/productos/DSC00957.webp',
            '/productos/DSC00958.webp',
            '/productos/DSC00959.webp'
          ],
          features: [
            '9 Baterías TROJAN Nuevas (8V)',
            'Batea Eléctrica de Aluminio',
            'Llantas Nuevas 20x8x10',
            'Pintura Nueva - Color Blanco',
            'Vestiduras Nuevas en Negro',
            'Luces LED',
            'Cargador Integrado',
            'Defensa',
            '100% Eléctrico',
            'Modelo 2020'
          ],
          specs: [
            { label: 'Marca', value: 'Cushman' },
            { label: 'Modelo', value: 'Hauler PRO Aluminium Bed BOX' },
            { label: 'Año', value: '2020' },
            { label: 'Color', value: 'Blanco' },
            { label: 'Motor', value: 'Eléctrico' },
            { label: 'Baterías', value: '9x Trojan 8V (Nuevas)' },
            { label: 'Tipo de Batea', value: 'Aluminio Eléctrica' },
            { label: 'Llantas', value: 'Nuevas 20x8x10' },
            { label: 'Vestiduras', value: 'Nuevas - Negro' },
            { label: 'Iluminación', value: 'Luces LED' },
            { label: 'Condición', value: 'Seminuevo - Excelente Estado' }
          ]
        }
      }
    },
    {
      params: { slug: 'hauler-pro-food-service-vanbox' },
      props: {
        product: {
          name: 'HAULER PRO FOOD SERVICE VANBOX',
          subtitle: 'CAJA SECA - COLOR BLANCO/NEGRO',
          price: 220000,
          currency: 'MXN',
          description: 'Carrito utilitario eléctrico Cushman Hauler PRO modelo 2020 en color blanco/negro, equipado con caja seca VanBox, 9 baterías Trojan nuevas de 8V, llantas nuevas 18x8.5x8, pintura nueva, vestiduras nuevas en negro, luces LED y cargador integrado. Ideal para food service, catering, hotelería y campus universitarios.',
          images: [
            '/productos/DSC00921.webp',
            '/productos/DSC00925.webp',
            '/productos/DSC00927.webp',
            '/productos/DSC00929.webp',
            '/productos/DSC00931.webp',
            '/productos/DSC00932.webp',
            '/productos/DSC00933.webp',
            '/productos/DSC00934.webp',
            '/productos/DSC00936.webp',
            '/productos/DSC00937.webp',
            '/productos/DSC00939.webp'
          ],
          features: [
            'Caja Seca VanBox',
            '9 Baterías TROJAN Nuevas (8V)',
            'Llantas Nuevas 18x8.5x8',
            'Pintura Nueva - Color Blanco/Negro',
            'Vestiduras Nuevas en Negro',
            'Luces LED',
            'Cargador Integrado',
            'Ideal para Food Service',
            'Perfecto para Hotelería',
            '100% Eléctrico',
            'Modelo 2020'
          ],
          specs: [
            { label: 'Marca', value: 'Cushman' },
            { label: 'Modelo', value: 'Hauler PRO Food Service VanBox' },
            { label: 'Año', value: '2020' },
            { label: 'Color', value: 'Blanco/Negro' },
            { label: 'Motor', value: 'Eléctrico' },
            { label: 'Baterías', value: '9x Trojan 8V (Nuevas)' },
            { label: 'Tipo de Configuración', value: 'Caja Seca VanBox' },
            { label: 'Llantas', value: 'Nuevas 18x8.5x8' },
            { label: 'Vestiduras', value: 'Nuevas - Negro' },
            { label: 'Iluminación', value: 'Luces LED' },
            { label: 'Uso Ideal', value: 'Food Service / Catering / Hoteles' },
            { label: 'Condición', value: 'Seminuevo - Excelente Estado' }
          ]
        }
      }
    }
  ];
}

const { product } = Astro.props;
const { slug } = Astro.params;

// Todos los productos para la sección de relacionados
const allProducts = [
  {
    id: 'hauler-pro-aluminium-bed-box-negro',
    title: 'HAULER PRO ALUMINIUM BED BOX <span class="text-blue-600">ELÉCTRICO</span>',
    subtitle: 'BATEA ELÉCTRICA DE ALUMINIO - COLOR NEGRO',
    price: '$220,000 MXN',
    images: [
      '/productos/DSC00899.webp',
      '/productos/DSC00900.webp',
      '/productos/DSC00902.webp',
      '/productos/DSC00903.webp',
      '/productos/DSC00905.webp'
    ],
    features: [
      { icon: 'battery-charging', text: '9 Baterías <strong>TROJAN Nuevas</strong> (8V)', color: 'text-green-600' },
      { icon: 'truck', text: '<strong>Batea Eléctrica</strong> de Aluminio', color: 'text-blue-600' },
      { icon: 'check-circle', text: 'Llantas Nuevas 20x8x10 y Vestiduras Negras', color: 'text-gray-500' }
    ]
  },
  {
    id: 'hauler-pro-aluminium-bed-box-blanco',
    title: 'HAULER PRO ALUMINIUM BED BOX <span class="text-blue-600">ELÉCTRICO</span>',
    subtitle: 'BATEA ELÉCTRICA DE ALUMINIO - COLOR BLANCO',
    price: '$220,000 MXN',
    images: [
      '/productos/DSC00942.webp',
      '/productos/DSC00943.webp',
      '/productos/DSC00945.webp',
      '/productos/DSC00946.webp',
      '/productos/DSC00947.webp'
    ],
    features: [
      { icon: 'battery-charging', text: '9 Baterías <strong>TROJAN Nuevas</strong> (8V)', color: 'text-green-600' },
      { icon: 'truck', text: '<strong>Batea Eléctrica</strong> de Aluminio', color: 'text-blue-600' },
      { icon: 'zap', text: 'Luces LED y Vestiduras Negras Nuevas', color: 'text-gray-500' }
    ]
  },
  {
    id: 'hauler-pro-food-service-vanbox',
    title: 'HAULER PRO <span class="text-blue-600">FOOD SERVICE VANBOX</span>',
    subtitle: 'CAJA SECA - COLOR BLANCO/NEGRO',
    price: '$220,000 MXN',
    images: [
      '/productos/DSC00921.webp',
      '/productos/DSC00925.webp',
      '/productos/DSC00927.webp',
      '/productos/DSC00929.webp',
      '/productos/DSC00931.webp'
    ],
    features: [
      { icon: 'package', text: '<strong>Caja Seca</strong> VanBox', color: 'text-orange-500' },
      { icon: 'battery-charging', text: '9 Baterías <strong>TROJAN Nuevas</strong> (8V)', color: 'text-green-600' },
      { icon: 'hotel', text: 'Ideal para Hotelería, Catering y Campus', color: 'text-gray-500' }
    ]
  }
];

// Filtrar para mostrar solo los productos que NO son el actual
const relatedProducts = allProducts.filter(p => p.id !== slug);
---

<BaseLayout
  title={`${product.name} - ${product.subtitle} | Cushman Utilitarios`}
  description={product.description}
  image={product.images[0]}
  type="product"
>
  <Header />

  <!-- Product Schema -->
  <script type="application/ld+json" set:html={JSON.stringify({
    "@context": "https://schema.org",
    "@type": "Product",
    "name": product.name,
    "description": product.description,
    "image": product.images.map(img => new URL(img, siteConfig.url).toString()),
    "brand": {
      "@type": "Brand",
      "name": "Cushman"
    },
    "offers": {
      "@type": "Offer",
      "url": new URL(Astro.url.pathname, siteConfig.url).toString(),
      "priceCurrency": product.currency,
      "price": product.price,
      "availability": "https://schema.org/InStock",
      "seller": {
        "@type": "Organization",
        "name": siteConfig.name
      }
    },
    "aggregateRating": {
      "@type": "AggregateRating",
      "ratingValue": "4.8",
      "reviewCount": "12"
    }
  })} />

  <main>
    <!-- Breadcrumbs -->
    <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
      <ol class="flex items-center space-x-2 text-sm text-gray-600">
        <li><a href="/" class="hover:text-blue-600">Inicio</a></li>
        <li><i data-lucide="chevron-right" class="w-4 h-4"></i></li>
        <li><a href="/#modelos" class="hover:text-blue-600">Productos</a></li>
        <li><i data-lucide="chevron-right" class="w-4 h-4"></i></li>
        <li class="text-gray-900 font-medium">{product.name}</li>
      </ol>
    </nav>

    <!-- Product Hero -->
    <section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
      <div class="grid lg:grid-cols-2 gap-12">
        <!-- Galería -->
        <div>
          <div class="sticky top-24">
            <img id="main-image" src={product.images[0]} alt={product.name} class="w-full rounded-2xl shadow-2xl mb-4">
            <div class="grid grid-cols-3 gap-4">
              {product.images.map((img, index) => (
                <img
                  src={img}
                  alt={`${product.name} vista ${index + 1}`}
                  class="w-full h-24 object-cover rounded-lg cursor-pointer hover:opacity-75 transition-opacity thumbnail"
                  onclick={`document.getElementById('main-image').src='${img}'`}
                >
              ))}
            </div>
          </div>
        </div>

        <!-- Info del Producto -->
        <div>
          <h1 class="text-4xl md:text-5xl font-extrabold text-gray-900 mb-4">{product.name}</h1>
          <p class="text-xl text-gray-600 mb-6">{product.subtitle}</p>

          <div class="bg-blue-50 border-2 border-blue-600 rounded-2xl p-6 mb-8">
            <p class="text-sm text-gray-600 mb-2">Precio Fijo</p>
            <p class="text-5xl font-extrabold text-blue-600">${product.price.toLocaleString('es-MX')} MXN</p>
            <p class="text-sm text-gray-600 mt-2">+ IVA si requiere factura</p>
          </div>

          <p class="text-lg text-gray-700 mb-8">{product.description}</p>

          <div class="space-y-4 mb-8">
            <h3 class="text-xl font-bold text-gray-900">Características Principales:</h3>
            <ul class="space-y-3">
              {product.features.map(feature => (
                <li class="flex items-start">
                  <i data-lucide="check-circle" class="w-6 h-6 text-green-600 mr-3 mt-0.5"></i>
                  <span class="text-gray-700">{feature}</span>
                </li>
              ))}
            </ul>
          </div>

          <div class="flex flex-col sm:flex-row gap-4">
            <a
              id="whatsapp-btn-main"
              href={`https://wa.me/${siteConfig.contact.whatsapp}?text=${encodeURIComponent(`Hola, me interesa el ${product.name}. ¿Pueden darme más información?`)}`}
              target="_blank"
              rel="noopener noreferrer"
              class="flex-1 bg-green-500 text-white text-center font-bold py-4 px-6 rounded-xl hover:bg-green-600 transition-all flex items-center justify-center"
            >
              <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
              </svg>
              Contactar por WhatsApp
            </a>
            <a
              id="phone-btn-main"
              href={`tel:${siteConfig.contact.phone}`}
              class="flex-1 bg-blue-600 text-white text-center font-bold py-4 px-6 rounded-xl hover:bg-blue-700 transition-all flex items-center justify-center"
            >
              <i data-lucide="phone" class="w-6 h-6 mr-2"></i>
              Llamar Ahora
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- Especificaciones Técnicas -->
    <section class="bg-gray-50 py-16">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <h2 class="text-3xl font-extrabold text-gray-900 mb-8">Especificaciones Técnicas</h2>
        <div class="bg-white rounded-2xl shadow-lg p-8">
          <dl class="grid grid-cols-1 md:grid-cols-2 gap-6">
            {product.specs.map(spec => (
              <div class="border-b border-gray-200 pb-4">
                <dt class="text-sm font-semibold text-gray-500 mb-1">{spec.label}</dt>
                <dd class="text-lg font-bold text-gray-900">{spec.value}</dd>
              </div>
            ))}
          </dl>
        </div>
      </div>
    </section>

    <!-- Otros Productos Relacionados -->
    <section class="py-16 bg-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <h2 class="text-3xl font-extrabold text-gray-900 mb-8 text-center">Otros productos relacionados</h2>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
          {relatedProducts.map((relatedProduct) => (
            <ProductCard
              productId={relatedProduct.id}
              title={relatedProduct.title}
              subtitle={relatedProduct.subtitle}
              price={relatedProduct.price}
              features={relatedProduct.features}
              images={relatedProduct.images}
            />
          ))}
        </div>
      </div>
    </section>

    <!-- CTA Final -->
    <section class="py-16">
      <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h2 class="text-3xl font-extrabold text-gray-900 mb-4">¿Listo para adquirir este vehículo?</h2>
        <p class="text-lg text-gray-600 mb-8">Contáctenos ahora y le enviaremos toda la información técnica. Aceptamos todas las tarjetas de crédito.</p>
        <a
          id="whatsapp-btn-cta"
          href={`https://wa.me/${siteConfig.contact.whatsapp}?text=${encodeURIComponent(`Hola, quiero más información sobre el ${product.name}`)}`}
          target="_blank"
          rel="noopener noreferrer"
          class="inline-flex items-center bg-green-500 text-white text-lg font-bold px-8 py-4 rounded-xl shadow-lg hover:bg-green-600 transition-all transform hover:scale-105"
        >
          <svg class="w-6 h-6 mr-3" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
          </svg>
          Solicitar Cotización
        </a>
      </div>
    </section>
  </main>

  <Footer />
  <WhatsAppButton message={`Hola, me interesa el ${product.name}. ¿Pueden darme más información?`} />

  <!-- Facebook Pixel Event Tracking -->
  <script is:inline>
    document.addEventListener('DOMContentLoaded', function() {
      // Track WhatsApp clicks
      const whatsappBtnMain = document.getElementById('whatsapp-btn-main');
      const whatsappBtnCta = document.getElementById('whatsapp-btn-cta');

      if (whatsappBtnMain) {
        whatsappBtnMain.addEventListener('click', function() {
          if (typeof fbq !== 'undefined') {
            fbq('track', 'Contact', { method: 'WhatsApp' });
          }
        });
      }

      if (whatsappBtnCta) {
        whatsappBtnCta.addEventListener('click', function() {
          if (typeof fbq !== 'undefined') {
            fbq('track', 'Contact', { method: 'WhatsApp' });
          }
        });
      }

      // Track Phone call clicks
      const phoneBtnMain = document.getElementById('phone-btn-main');
      if (phoneBtnMain) {
        phoneBtnMain.addEventListener('click', function() {
          if (typeof fbq !== 'undefined') {
            fbq('track', 'Contact', { method: 'Phone' });
          }
        });
      }
    });
  </script>
</BaseLayout>
